<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping default-lazy="false">
    <class name="eu.wisebed.wiseui.shared.ReservationDetails" table="RESERVATION">
        <id name="reservationid" column="reservation_id">
            <generator class="increment"/>
        </id>
        <property name="startTime"/>
        <property name="stopTime"/>
        <property name="duration" type="long" />
        <property name="imageFileName"/>
		<property name="imageFileNameField"/>
		<property name="secretReservationKey"/>
		<property name="urnPrefix"/>
		

		<!-- Many reservations can belong to a single user -->
		<many-to-one name="user"
			class="eu.wisebed.wiseui.shared.AuthenticationDetails"
			column="userid"
			not-null="true"/>
		
		<!-- Multiple sensors can be reserved by multiple reservations -->
		<set name="sensors" table="RESERVATION_TO_SENSOR">
			<key column="reservation_id"/>
			<many-to-many
				class="eu.wisebed.wiseui.shared.SensorDetails"
				column="sensor_id"/>
		</set>
    </class>
</hibernate-mapping>